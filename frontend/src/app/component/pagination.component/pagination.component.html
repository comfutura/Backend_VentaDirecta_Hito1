<!-- src/app/shared/components/pagination/pagination.component.html -->
<div class="pagination-container" [class]="'size-' + size + ' align-' + align + ' responsive'">

  <!-- Información de registros - Versión desktop -->
  <div *ngIf="showInfo" class="pagination-info desktop-info">
    <span class="info-text">
      Mostrando
      <strong class="text-primary-emphasis">{{ showingFrom }}</strong> -
      <strong class="text-primary-emphasis">{{ showingTo }}</strong> de
      <strong class="text-primary-emphasis">{{ totalItems }}</strong> registros
      <span *ngIf="totalPages > 1" class="page-info ms-2">
        (Página <span class="text-primary">{{ currentPage + 1 }}</span> de {{ totalPages }})
      </span>
    </span>
    <button *ngIf="showNavigation"
            class="btn btn-sm btn-outline-secondary refresh-btn"
            (click)="onRefresh()"
            [disabled]="!totalItems"
            [title]="'Refrescar'">
      <i class="bi bi-arrow-clockwise"></i>
      <span class="d-none d-sm-inline ms-1">Refrescar</span>
    </button>
  </div>

  <!-- Información de registros - Versión móvil compacta -->
  <div *ngIf="showInfo && totalPages > 1" class="pagination-info mobile-info d-none">
    <div class="mobile-info-content">
      <span class="mobile-page-info">
        <span class="text-primary fw-bold">{{ currentPage + 1 }}</span>/{{ totalPages }}
      </span>
      <span class="mobile-count-info text-muted">
        {{ showingFrom }}-{{ showingTo }} de {{ totalItems }}
      </span>
    </div>
  </div>

  <!-- Controles de paginación -->
  <div class="pagination-controls">

    <!-- Selector de tamaño de página -->
    <div *ngIf="showSizeSelector" class="page-size-selector">
      <label class="form-label d-none d-sm-inline">Mostrar:</label>
      <select class="form-select form-select-sm"
              [(ngModel)]="pageSize"
              (change)="changePageSize(pageSize)"
              [title]="'Registros por página'">
        <option *ngFor="let size of pageSizes" [value]="size">
          {{ size }}
        </option>
      </select>
      <span class="records-label d-sm-none">Reg.</span>
    </div>

    <!-- Navegación principal -->
    <nav *ngIf="showNavigation" aria-label="Navegación de página" class="navigation-container">
      <ul class="pagination mb-0">

        <!-- Primera página - Desktop -->
        <li class="page-item d-none d-sm-block" [class.disabled]="isFirstPage">
          <button class="page-link first-page-btn"
                  (click)="goToFirstPage()"
                  [disabled]="isFirstPage"
                  [attr.aria-label]="'Primera página'">
            <i class="bi bi-chevron-bar-left"></i>
            <span class="d-none d-md-inline ms-1">Primera</span>
          </button>
        </li>

        <!-- Primera página - Mobile -->
        <li class="page-item d-sm-none" [class.disabled]="isFirstPage">
          <button class="page-link first-page-btn"
                  (click)="goToFirstPage()"
                  [disabled]="isFirstPage"
                  [attr.aria-label]="'Primera página'">
            <i class="bi bi-chevron-bar-left"></i>
          </button>
        </li>

        <!-- Página anterior -->
        <li class="page-item" [class.disabled]="isFirstPage">
          <button class="page-link prev-page-btn"
                  (click)="goToPrevPage()"
                  [disabled]="isFirstPage"
                  [attr.aria-label]="'Página anterior'">
            <i class="bi bi-chevron-left"></i>
            <span class="d-none d-sm-inline ms-1">Anterior</span>
          </button>
        </li>

        <!-- Indicador de página actual - Solo móvil -->
        <li *ngIf="showJumpToPage && totalPages > 1" class="page-item d-block d-sm-none mobile-page-indicator">
          <button class="page-link current-page-btn"
                  (click)="toggleJumpInput()"
                  [title]="'Ir a página específica'">
            <span class="current-page">{{ currentPage + 1 }}</span>
            <span class="separator">/</span>
            <span class="total-pages">{{ totalPages }}</span>
          </button>
        </li>

        <!-- Salto a página - Desktop -->
        <li *ngIf="showJumpToPage && !showJumpInput && totalPages > 5" class="page-item d-none d-md-block">
          <button class="page-link jump-to-btn"
                  (click)="toggleJumpInput()"
                  [title]="'Ir a página específica'"
                  [attr.aria-label]="'Ir a página'">
            <i class="bi bi-input-cursor"></i>
            <span class="ms-1">Ir a</span>
          </button>
        </li>

        <li *ngIf="showJumpToPage && showJumpInput" class="page-item jump-input-container d-none d-md-flex">
          <div class="input-group input-group-sm jump-input-group">
            <input type="number"
                   class="form-control jump-to-input"
                   [(ngModel)]="jumpToPage"
                   (keydown.enter)="jumpToSpecificPage()"
                   (keydown.escape)="showJumpInput = false"
                   [min]="1"
                   [max]="totalPages"
                   placeholder="Pág."
                   aria-label="Número de página">
            <button class="btn btn-primary go-btn"
                    (click)="jumpToSpecificPage()"
                    [disabled]="!jumpToPage || jumpToPage < 1 || jumpToPage > totalPages"
                    [attr.aria-label]="'Ir'">
              <i class="bi bi-arrow-right"></i>
            </button>
          </div>
        </li>

        <!-- Página siguiente -->
        <li class="page-item" [class.disabled]="isLastPage">
          <button class="page-link next-page-btn"
                  (click)="goToNextPage()"
                  [disabled]="isLastPage"
                  [attr.aria-label]="'Página siguiente'">
            <span class="d-none d-sm-inline me-1">Siguiente</span>
            <i class="bi bi-chevron-right"></i>
          </button>
        </li>

        <!-- Última página - Desktop -->
        <li class="page-item d-none d-sm-block" [class.disabled]="isLastPage">
          <button class="page-link last-page-btn"
                  (click)="goToLastPage()"
                  [disabled]="isLastPage"
                  [attr.aria-label]="'Última página'">
            <span class="d-none d-md-inline me-1">Última</span>
            <i class="bi bi-chevron-bar-right"></i>
          </button>
        </li>

        <!-- Última página - Mobile -->
        <li class="page-item d-sm-none" [class.disabled]="isLastPage">
          <button class="page-link last-page-btn"
                  (click)="goToLastPage()"
                  [disabled]="isLastPage"
                  [attr.aria-label]="'Última página'">
            <i class="bi bi-chevron-bar-right"></i>
          </button>
        </li>

      </ul>
    </nav>

    <!-- Contador rápido - Solo móvil -->
    <div *ngIf="showInfo && totalPages > 1" class="quick-counter d-sm-none">
      <button class="btn btn-sm btn-outline-secondary"
              (click)="toggleJumpInput()"
              [title]="'Ir a página específica'">
        <i class="bi bi-hash"></i>
      </button>
    </div>

  </div>

  <!-- Modal de salto a página para móvil -->
  <div *ngIf="showJumpInput" class="mobile-jump-modal d-sm-none">
    <div class="modal-backdrop" (click)="showJumpInput = false"></div>
    <div class="modal-content">
      <div class="modal-header">
        <h6 class="modal-title">Ir a página</h6>
        <button type="button" class="btn-close" (click)="showJumpInput = false" aria-label="Cerrar"></button>
      </div>
      <div class="modal-body">
        <div class="input-group">
          <span class="input-group-text">Página</span>
          <input type="number"
                 class="form-control"
                 [(ngModel)]="jumpToPage"
                 (keydown.enter)="jumpToSpecificPage()"
                 [min]="1"
                 [max]="totalPages"
                 placeholder="1"
                 autofocus>
          <span class="input-group-text">de {{ totalPages }}</span>
        </div>
        <div class="d-grid gap-2 mt-3">
          <button class="btn btn-primary"
                  (click)="jumpToSpecificPage()"
                  [disabled]="!jumpToPage || jumpToPage < 1 || jumpToPage > totalPages">
            Ir a página {{ jumpToPage }}
          </button>
          <button class="btn btn-outline-secondary" (click)="showJumpInput = false">
            Cancelar
          </button>
        </div>
      </div>
    </div>
  </div>

</div>
